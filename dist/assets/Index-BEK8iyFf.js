import{P as Le,i as j,q as Te,C as _,M as le,h as S,a6 as Ue,D as C,K as y,a7 as ge,a8 as pe,a9 as ze,aa as Me,z as fe,_ as X,d as ee,c as O,k as E,a as f,s as H,t as A,a1 as G,F as W,l as K,n as D,p as te,g as se,j as Z,b as z,r as M,A as Ne,o as He,ab as Ge,u as We,ac as Ke,a3 as Ze}from"./index-EYZEKwgq.js";function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(a),!0).forEach(function(s){Ye(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((a,s)=>(t.includes(s)||(a[s]=y(e[s])),a),{})}function Y(e){return typeof e=="function"}function Je(e){return ze(e)||Me(e)}function Re(e,t,a){let s=e;const n=t.split(".");for(let c=0;c<n.length;c++){if(!s[n[c]])return a;s=s[n[c]]}return s}function ie(e,t,a){return C(()=>e.some(s=>Re(t,s,{[a]:!1})[a]))}function be(e,t,a){return C(()=>e.reduce((s,n)=>{const c=Re(t,n,{[a]:!1})[a]||[];return s.concat(c)},[]))}function Ae(e,t,a,s){return e.call(s,y(t),y(a),s)}function Oe(e){return e.$valid!==void 0?!e.$valid:!e}function Qe(e,t,a,s,n,c,r){let{$lazy:i,$rewardEarly:g}=n,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],b=arguments.length>8?arguments[8]:void 0,v=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0;const m=j(!!s.value),o=j(0);a.value=!1;const d=_([t,s].concat(u,p),()=>{if(i&&!s.value||g&&!v.value&&!a.value)return;let l;try{l=Ae(e,t,b,r)}catch($){l=Promise.reject($)}o.value++,a.value=!!o.value,m.value=!1,Promise.resolve(l).then($=>{o.value--,a.value=!!o.value,c.value=$,m.value=Oe($)}).catch($=>{o.value--,a.value=!!o.value,c.value=$,m.value=!0})},{immediate:!0,deep:typeof t=="object"});return{$invalid:m,$unwatch:d}}function Xe(e,t,a,s,n,c,r,i){let{$lazy:g,$rewardEarly:u}=s;const b=()=>({}),v=C(()=>{if(g&&!a.value||u&&!i.value)return!1;let p=!0;try{const m=Ae(e,t,r,c);n.value=m,p=Oe(m)}catch(m){n.value=m}return p});return{$unwatch:b,$invalid:v}}function et(e,t,a,s,n,c,r,i,g,u,b){const v=j(!1),p=e.$params||{},m=j(null);let o,d;e.$async?{$invalid:o,$unwatch:d}=Qe(e.$validator,t,v,a,s,m,n,e.$watchTargets,g,u,b):{$invalid:o,$unwatch:d}=Xe(e.$validator,t,a,s,m,n,g,u);const l=e.$message;return{$message:Y(l)?C(()=>l(ve({$pending:v,$invalid:o,$params:ve(p),$model:t,$response:m,$validator:c,$propertyPath:i,$property:r}))):l||"",$params:p,$pending:v,$invalid:o,$response:m,$unwatch:d}}function tt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=y(e),a=Object.keys(t),s={},n={},c={};let r=null;return a.forEach(i=>{const g=t[i];switch(!0){case Y(g.$validator):s[i]=g;break;case Y(g):s[i]={$validator:g};break;case i==="$validationGroups":r=g;break;case i.startsWith("$"):c[i]=g;break;default:n[i]=g}}),{rules:s,nestedValidators:n,config:c,validationGroups:r}}const st="__root";function at(e,t,a,s,n,c,r,i,g){const u=Object.keys(e),b=s.get(n,e),v=j(!1),p=j(!1),m=j(0);if(b){if(!b.$partial)return b;b.$unwatch(),v.value=b.$dirty.value}const o={$dirty:v,$path:n,$touch:()=>{v.value||(v.value=!0)},$reset:()=>{v.value&&(v.value=!1)},$commit:()=>{}};return u.length?(u.forEach(d=>{o[d]=et(e[d],t,o.$dirty,c,r,d,a,n,g,p,m)}),o.$externalResults=C(()=>i.value?[].concat(i.value).map((d,l)=>({$propertyPath:n,$property:a,$validator:"$externalResults",$uid:`${n}-externalResult-${l}`,$message:d,$params:{},$response:null,$pending:!1})):[]),o.$invalid=C(()=>{const d=u.some(l=>y(o[l].$invalid));return p.value=d,!!o.$externalResults.value.length||d}),o.$pending=C(()=>u.some(d=>y(o[d].$pending))),o.$error=C(()=>o.$dirty.value?o.$pending.value||o.$invalid.value:!1),o.$silentErrors=C(()=>u.filter(d=>y(o[d].$invalid)).map(d=>{const l=o[d];return S({$propertyPath:n,$property:a,$validator:d,$uid:`${n}-${d}`,$message:l.$message,$params:l.$params,$response:l.$response,$pending:l.$pending})}).concat(o.$externalResults.value)),o.$errors=C(()=>o.$dirty.value?o.$silentErrors.value:[]),o.$unwatch=()=>u.forEach(d=>{o[d].$unwatch()}),o.$commit=()=>{p.value=!0,m.value=Date.now()},s.set(n,e,o),o):(b&&s.set(n,e,o),o)}function nt(e,t,a,s,n,c,r){const i=Object.keys(e);return i.length?i.reduce((g,u)=>(g[u]=ce({validations:e[u],state:t,key:u,parentKey:a,resultsCache:s,globalConfig:n,instance:c,externalResults:r}),g),{}):{}}function rt(e,t,a){const s=C(()=>[t,a].filter(o=>o).reduce((o,d)=>o.concat(Object.values(y(d))),[])),n=C({get(){return e.$dirty.value||(s.value.length?s.value.every(o=>o.$dirty):!1)},set(o){e.$dirty.value=o}}),c=C(()=>{const o=y(e.$silentErrors)||[],d=s.value.filter(l=>(y(l).$silentErrors||[]).length).reduce((l,$)=>l.concat(...$.$silentErrors),[]);return o.concat(d)}),r=C(()=>{const o=y(e.$errors)||[],d=s.value.filter(l=>(y(l).$errors||[]).length).reduce((l,$)=>l.concat(...$.$errors),[]);return o.concat(d)}),i=C(()=>s.value.some(o=>o.$invalid)||y(e.$invalid)||!1),g=C(()=>s.value.some(o=>y(o.$pending))||y(e.$pending)||!1),u=C(()=>s.value.some(o=>o.$dirty)||s.value.some(o=>o.$anyDirty)||n.value),b=C(()=>n.value?g.value||i.value:!1),v=()=>{e.$touch(),s.value.forEach(o=>{o.$touch()})},p=()=>{e.$commit(),s.value.forEach(o=>{o.$commit()})},m=()=>{e.$reset(),s.value.forEach(o=>{o.$reset()})};return s.value.length&&s.value.every(o=>o.$dirty)&&v(),{$dirty:n,$errors:r,$invalid:i,$anyDirty:u,$error:b,$pending:g,$touch:v,$reset:m,$silentErrors:c,$commit:p}}function ce(e){let{validations:t,state:a,key:s,parentKey:n,childResults:c,resultsCache:r,globalConfig:i={},instance:g,externalResults:u}=e;const b=n?`${n}.${s}`:s,{rules:v,nestedValidators:p,config:m,validationGroups:o}=tt(t),d=V(V({},i),m),l=s?C(()=>{const B=y(a);return B?y(B[s]):void 0}):a,$=V({},y(u)||{}),R=C(()=>{const B=y(u);return s?B?y(B[s]):void 0:B}),h=at(v,l,s,r,b,d,g,R,a),w=nt(p,l,b,r,d,g,R),P={};o&&Object.entries(o).forEach(B=>{let[I,F]=B;P[I]={$invalid:ie(F,w,"$invalid"),$error:ie(F,w,"$error"),$pending:ie(F,w,"$pending"),$errors:be(F,w,"$errors"),$silentErrors:be(F,w,"$silentErrors")}});const{$dirty:x,$errors:U,$invalid:ne,$anyDirty:Pe,$error:xe,$pending:re,$touch:oe,$reset:Fe,$silentErrors:Ve,$commit:me}=rt(h,w,c),_e=s?C({get:()=>y(l),set:B=>{x.value=!0;const I=y(a),F=y(u);F&&(F[s]=$[s]),le(I[s])?I[s].value=B:I[s]=B}}):null;s&&d.$autoDirty&&_(l,()=>{x.value||oe();const B=y(u);B&&(B[s]=$[s])},{flush:"sync"});async function qe(){return oe(),d.$rewardEarly&&(me(),await fe()),await fe(),new Promise(B=>{if(!re.value)return B(!ne.value);const I=_(re,()=>{B(!ne.value),I()})})}function Ie(B){return(c.value||{})[B]}function De(){le(u)?u.value=$:Object.keys($).length===0?Object.keys(u).forEach(B=>{delete u[B]}):Object.assign(u,$)}return S(V(V(V({},h),{},{$model:_e,$dirty:x,$error:xe,$errors:U,$invalid:ne,$anyDirty:Pe,$pending:re,$touch:oe,$reset:Fe,$path:b||st,$silentErrors:Ve,$validate:qe,$commit:me},c&&{$getResultsForChild:Ie,$clearExternalResults:De,$validationGroups:P}),w))}class ot{constructor(){this.storage=new Map}set(t,a,s){this.storage.set(t,{rules:a,result:s})}checkRulesValidity(t,a,s){const n=Object.keys(s),c=Object.keys(a);return c.length!==n.length||!c.every(i=>n.includes(i))?!1:c.every(i=>a[i].$params?Object.keys(a[i].$params).every(g=>y(s[i].$params[g])===y(a[i].$params[g])):!0)}get(t,a){const s=this.storage.get(t);if(!s)return;const{rules:n,result:c}=s,r=this.checkRulesValidity(t,a,n),i=c.$unwatch?c.$unwatch:()=>({});return r?c:{$dirty:c.$dirty,$partial:!0,$unwatch:i}}}const N={COLLECT_ALL:!0,COLLECT_NONE:!1},he=Symbol("vuelidate#injectChildResults"),ye=Symbol("vuelidate#removeChildResults");function it(e){let{$scope:t,instance:a}=e;const s={},n=j([]),c=C(()=>n.value.reduce((b,v)=>(b[v]=y(s[v]),b),{}));function r(b,v){let{$registerAs:p,$scope:m,$stopPropagation:o}=v;o||t===N.COLLECT_NONE||m===N.COLLECT_NONE||t!==N.COLLECT_ALL&&t!==m||(s[p]=b,n.value.push(p))}a.__vuelidateInjectInstances=[].concat(a.__vuelidateInjectInstances||[],r);function i(b){n.value=n.value.filter(v=>v!==b),delete s[b]}a.__vuelidateRemoveInstances=[].concat(a.__vuelidateRemoveInstances||[],i);const g=ge(he,[]);pe(he,a.__vuelidateInjectInstances);const u=ge(ye,[]);return pe(ye,a.__vuelidateRemoveInstances),{childResults:c,sendValidationResultsToParent:g,removeValidationResultsFromParent:u}}function Ee(e){return new Proxy(e,{get(t,a){return typeof t[a]=="object"?Ee(t[a]):C(()=>t[a])}})}let Ce=0;function de(e,t){var a;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(s=e,e=void 0,t=void 0);let{$registerAs:n,$scope:c=N.COLLECT_ALL,$stopPropagation:r,$externalResults:i,currentVueInstance:g}=s;const u=g||((a=Le())===null||a===void 0?void 0:a.proxy),b=u?u.$options:{};n||(Ce+=1,n=`_vuelidate_${Ce}`);const v=j({}),p=new ot,{childResults:m,sendValidationResultsToParent:o,removeValidationResultsFromParent:d}=u?it({$scope:c,instance:u}):{childResults:j({})};if(!e&&b.validations){const l=b.validations;t=j({}),Te(()=>{t.value=u,_(()=>Y(l)?l.call(t.value,new Ee(t.value)):l,$=>{v.value=ce({validations:$,state:t,childResults:m,resultsCache:p,globalConfig:s,instance:u,externalResults:i||u.vuelidateExternalResults})},{immediate:!0})}),s=b.validationsConfig||s}else{const l=le(e)||Je(e)?e:S(e||{});_(l,$=>{v.value=ce({validations:$,state:t,childResults:m,resultsCache:p,globalConfig:s,instance:u??{},externalResults:i})},{immediate:!0})}return u&&(o.forEach(l=>l(v,{$registerAs:n,$scope:c,$stopPropagation:r})),Ue(()=>d.forEach(l=>l(n)))),C(()=>V(V({},y(v.value)),m.value))}function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,s)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?we(Object(a),!0).forEach(function(s){lt(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e){return typeof e=="function"}function ue(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function ae(e){return J(e.$validator)?L({},e):{$validator:e}}function je(e){return typeof e=="object"?e.$valid:e}function Se(e){return e.$validator||e}function ct(e,t){if(!ue(e))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof e}`);if(!ue(t)&&!J(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const a=ae(t);return a.$params=L(L({},a.$params||{}),e),a}function ut(e,t){if(!J(e)&&typeof y(e)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof e}`);if(!ue(t)&&!J(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const a=ae(t);return a.$message=e,a}function dt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const a=ae(e);return L(L({},a),{},{$async:!0,$watchTargets:t})}function mt(e){return{$validator(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return y(t).reduce((c,r,i)=>{const g=Object.entries(r).reduce((u,b)=>{let[v,p]=b;const m=e[v]||{},o=Object.entries(m).reduce((d,l)=>{let[$,R]=l;const w=Se(R).call(this,p,r,i,...s),P=je(w);if(d.$data[$]=w,d.$data.$invalid=!P||!!d.$data.$invalid,d.$data.$error=d.$data.$invalid,!P){let x=R.$message||"";const U=R.$params||{};typeof x=="function"&&(x=x({$pending:!1,$invalid:!P,$params:U,$model:p,$response:w})),d.$errors.push({$property:v,$message:x,$params:U,$response:w,$model:p,$pending:!1,$validator:$})}return{$valid:d.$valid&&P,$data:d.$data,$errors:d.$errors}},{$valid:!0,$data:{},$errors:[]});return u.$data[v]=o.$data,u.$errors[v]=o.$errors,{$valid:u.$valid&&o.$valid,$data:u.$data,$errors:u.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:c.$valid&&g.$valid,$data:c.$data.concat(g.$data),$errors:c.$errors.concat(g.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:t=>{let{$response:a}=t;return a?a.$errors.map(s=>Object.values(s).map(n=>n.map(c=>c.$message)).reduce((n,c)=>n.concat(c),[])):[]}}}const T=e=>{if(e=y(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let t in e)return!0;return!1}return!!String(e).length},ke=e=>(e=y(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function q(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return s=>(s=y(s),!T(s)||t.every(n=>(n.lastIndex=0,n.test(s))))}var k=Object.freeze({__proto__:null,forEach:mt,len:ke,normalizeValidatorObject:ae,regex:q,req:T,unwrap:y,unwrapNormalizedValidator:Se,unwrapValidatorResponse:je,withAsync:dt,withMessage:ut,withParams:ct});q(/^[a-zA-Z]*$/);q(/^[a-zA-Z0-9]*$/);var gt=q(/^\d*(\.\d+)?$/),Bs={$validator:gt,$message:"Value must be numeric",$params:{type:"numeric"}};const pt=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var ft=q(pt),$t={$validator:ft,$message:"Value is not a valid email address",$params:{type:"email"}};function vt(e){return t=>!T(t)||ke(t)>=y(e)}function bt(e){return{$validator:vt(e),$message:t=>{let{$params:a}=t;return`This field should be at least ${a.min} characters long`},$params:{min:e,type:"minLength"}}}function ht(e){return typeof e=="string"&&(e=e.trim()),T(e)}var Q={$validator:ht,$message:"Value is required",$params:{type:"required"}};const Be=(e,t)=>e?T(typeof t=="string"?t.trim():t):!0;function yt(e){return function(t,a){if(typeof e!="function")return Be(y(e),t);const s=e.call(this,t,a);return Be(s,t)}}function Rs(e){return{$validator:yt(e),$message:"The value is required",$params:{type:"requiredIf",prop:e}}}const Ct=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;q(Ct);q(/(^[0-9]*$)|(^-[0-9]+$)/);q(/^[-]?\d*(\.\d+)?$/);const wt={paragraph:"Enter the email you use to sign in or will use to register, the same field works for both cases.",title:"Access your account"},Bt={paragraph:"Indica el correo el cual usas para entrar o usaras para registrate, el mismo campo sirve para ambos casos.",title:"Accede a tu cuenta"},Rt={backBtn:"Back",inputs:{accessCode:{help:"Check your email, we sent you the access code there.",label:"Access code"}},loginBtn:{loading:"Loading",text:"Login"},validator:{required:"Este campo es requerido"}},At={backBtn:"Atrás",inputs:{accessCode:{help:"Revisa tu correo, te enviamos el código de acceso allí.",label:"Código de acceso"}},loginBtn:{loading:"Cargando",text:"Entrar"},validator:{required:"Este campo es requerido"}},Ot=ee({emits:["goBack","response"],props:{email:String,isVisible:Boolean},setup(e,{emit:t}){_(()=>[e.isVisible],(v,p)=>{r.accessCode.disabled=!v[0],r.loginBtn.disabled=!v[0]});const a=te(),s={en:Rt,es:At},{t:n}=se({messages:s}),c=S({accessCode:""}),r=S({accessCode:{disabled:!0},goBackBtn:{disabled:!1},loginBtn:{disabled:!1,html:n("loginBtn.text"),loadingHtml:'<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span class="sr-only"> '+n("loginBtn.loading")+"</span>"}}),i={accessCode:{required:k.withMessage(n("validator.required"),Q)}},g=de(i,c,{$scope:!1}),u=()=>{t("goBack")};async function b(){if(await g.value.$validate()){r.goBackBtn.disabled=!0,r.loginBtn.disabled=!0,r.loginBtn.html=r.loginBtn.loadingHtml;let p={method:"post",params:{accessCode:c.accessCode,email:e.email,langId:a.state.langId},url:"http://127.0.0.1:3002/users/sign-in"};Z(p).then(function(m){if(r.goBackBtn.disabled=!1,r.loginBtn.disabled=!1,r.loginBtn.html=n("loginBtn.text"),m.status===200){var o=m.data.message,d=m.data.status;m.data.statusCode===1&&(r.loginBtn.disabled=!0);let $={alertData:{message:o,show:!0,type:d},userData:m.data.userData,statusCode:m.data.statusCode};t("response",$)}else throw{message:n("alert.error"),type:"error"}}).catch(m=>{r.loginBtn.disabled=!1,r.loginBtn.html=n("loginBtn.text");let d={alertData:{close:m.close?m.close:!1,message:m.message?m.message:n("loginBtn.text"),show:!0,timer:m.timer?m.timer:!1,timerSeconds:m.timerSeconds?m.timerSeconds:0,type:m.type?m.type:"error"}};t("response",d)})}}return{attrs:r,data:c,goBack:u,login:b,t:n,v$:g}}}),Et={class:"input-group"},jt={class:"form-label"},St=["disabled"],kt={id:"accessCodeHelpBlock",class:"form-text"},Pt={class:"d-grid"},xt={class:"btn-group",role:"group"},Ft=["disabled"],Vt=["disabled","innerHTML"];function _t(e,t,a,s,n,c){return E(),O("form",null,[f("div",{class:D(e.v$.accessCode.$errors.length>0?"field-error mb-4":"mb-4")},[f("div",Et,[f("label",jt,A(e.t("inputs.accessCode.label")),1),t[3]||(t[3]=f("span",{class:"input-group-text"},[f("i",{class:"bi bi-lock"})],-1)),H(f("input",{class:"form-control",disabled:e.attrs.accessCode.disabled,id:"access-code",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>e.data.accessCode=r)},null,8,St),[[G,e.data.accessCode]]),(E(!0),O(W,null,K(e.v$.accessCode.$errors,r=>(E(),O("div",{class:"error-msg",key:r.$uid},[f("p",null,A(r.$message),1)]))),128))]),f("div",kt,A(e.t("inputs.accessCode.help")),1)],2),f("div",Pt,[f("div",xt,[f("button",{disabled:e.attrs.goBackBtn.disabled,onClick:t[1]||(t[1]=(...r)=>e.goBack&&e.goBack(...r)),class:"btn",id:"btn-sign-in",type:"button"},A(e.t("backBtn")),9,Ft),f("button",{disabled:e.attrs.loginBtn.disabled,onClick:t[2]||(t[2]=(...r)=>e.login&&e.login(...r)),class:"btn",id:"btn-sign-in",type:"button",innerHTML:e.attrs.loginBtn.html},null,8,Vt)])])])}const qt=X(Ot,[["render",_t],["__scopeId","data-v-1eccc6a2"]]),It={alert:{error:{emailNoConnction:"The email with your access code could not be sent, please try again!",general:"An error occurred!"}},getAccessCodeBtn:{text:"Request access code",loading:"Loading"},inputs:{email:{help:"A temporary access code will be sent to you.",label:"Email"}},validator:{required:"Is required"}},Dt={alert:{error:{emailNoConnction:"¡No se pudo enviar el correo con tu código de acceso, prueba nuevamente!",general:"¡Ocurrió un error!"}},getAccessCodeBtn:{text:"Solicitar código de acceso",loading:"Cargando"},inputs:{email:{help:"Se le enviará un código de acceso temporal.",label:"Correo electrónico"}},validator:{required:"Este campo es requerido"}},Lt=ee({emits:["response"],props:{isVisible:Boolean},setup(e,{emit:t}){_(()=>[e.isVisible],(b,v)=>{r.email.disabled=!b[0],r.requestAccessCodeButton.disabled=!b[0]});const a=te(),s={en:It,es:Dt},{t:n}=se({messages:s}),c=S({email:""}),r=S({email:{disabled:!1},requestAccessCodeButton:{disabled:!1,html:n("getAccessCodeBtn.text"),loadingHtml:'<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span class="sr-only"> '+n("getAccessCodeBtn.loading")+"</span>"}}),i={email:{required:k.withMessage(n("validator.required"),Q)}},g=de(i,c,{$scope:!1});async function u(){if(await g.value.$validate()){r.email.disabled=!0,r.requestAccessCodeButton.disabled=!0,r.requestAccessCodeButton.html=r.requestAccessCodeButton.loadingHtml;let v={method:"get",params:{email:c.email,langId:a.state.langId},url:"http://127.0.0.1:3002/users/get-access-code"};Z(v).then(function(p){if(r.email.disabled=!1,r.requestAccessCodeButton.disabled=!1,r.requestAccessCodeButton.html=n("getAccessCodeBtn.text"),p.status===200){var m=p.data.message,o=p.data.status;if(p.data.statusCode===1)r.requestAccessCodeButton.disabled=!0;else if(p.data.statusCode===4)throw{message:n("alert.error.emailNoConnction"),type:"error"};let l={alertData:{message:m,show:p.data.statusCode!==0,type:o},email:c.email,statusCode:p.data.statusCode};t("response",l)}else throw{message:n("alert.error"),type:"error"}}).catch(p=>{let o={alertData:{close:p.close?p.close:!1,message:p.message?p.message:n("getAccessCodeBtn.text"),show:!0,timer:p.timer?p.timer:!1,timerSeconds:p.timerSeconds?p.timerSeconds:0,type:p.type?p.type:"error"}};t("response",o)})}}return{attrs:r,data:c,getAccessCode:u,t:n,v$:g}}}),Tt={class:"input-group"},Ut={class:"form-label"},zt=["disabled"],Mt={id:"emailHelpBlock",class:"form-text"},Nt={class:"d-grid"},Ht=["disabled","innerHTML"];function Gt(e,t,a,s,n,c){return E(),O("form",null,[f("div",{class:D(e.v$.email.$errors.length>0?"field-error  mb-4":"mb-4")},[f("div",Tt,[f("label",Ut,A(e.t("inputs.email.label")),1),t[2]||(t[2]=f("span",{class:"input-group-text"},[f("i",{class:"bi bi-person"})],-1)),H(f("input",{class:"form-control",disabled:e.attrs.email.disabled,id:"email",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>e.data.email=r)},null,8,zt),[[G,e.data.email]]),(E(!0),O(W,null,K(e.v$.email.$errors,r=>(E(),O("div",{class:"error-msg",key:r.$uid},[f("p",null,A(r.$message),1)]))),128))]),f("div",Mt,A(e.t("inputs.email.help")),1)],2),f("div",Nt,[f("button",{disabled:e.attrs.requestAccessCodeButton.disabled,onClick:t[1]||(t[1]=(...r)=>e.getAccessCode&&e.getAccessCode(...r)),class:"btn btn-filled",id:"btn-get-access-code",type:"button",innerHTML:e.attrs.requestAccessCodeButton.html},null,8,Ht)])])}const Wt=X(Lt,[["render",Gt],["__scopeId","data-v-9ff80785"]]),Kt={alert:{error:"An error occurred.",success:"You have successfully registered!. An email has been sent to you to verify your account.",warning:"The email is already registered!"},backBtn:"Back",help:"",inputs:{email:{label:"Email"},username:{label:"Username",notAvailable:"Usuario no disponible"}},signUpBtn:{loadingText:"Loading",text:"Register"},validator:{alphaNum:"Accepts only alphanumerics",email:"Incorrect email format",minLength:e=>`It must have at least ${e} characters`,required:"Is required",noSpecialChars:"Only lowercase letters, hyphen, period and numbers are accepted, without spaces"}},Zt={alert:{error:"Ocurrió un error.",success:"Te haz registrado con éxito!. Se te ha enviado un correo para verificar tu cuenta.",warning:"El correo ya se encuentra resgistrado!"},backBtn:"Atrás",help:"Si estas viendo este formulario es porque este correo no está registrado en el sistema.",inputs:{email:{label:"Correo electrónico"},username:{label:"Nombre de usuario",notAvailable:"Usuario no disponible"}},signUpBtn:{loadingText:"Cargando",text:"Registrarme"},validator:{alphaNum:"Solo acepta alfanuméricos",email:"Formato de correo electrónico incorrecto",minLength:"Debe contener al menos {min} caracteres",required:"Este campo es requerido",noSpecialChars:"Sólo se aceptan letras minúsculas, guión, punto y números, sin espacios"}},Yt=ee({emits:["goBack","response"],props:{email:String,isVisible:Boolean},setup(e,{emit:t}){_(()=>[e.email,e.isVisible],(o,d)=>{i.email.disabled=!o[1],i.signUpBtn.disabled=!o[1],r.email=o[0]});const a=te(),s={en:Kt,es:Zt},{t:n}=se({messages:s}),c=j(5),r=S({email:"",username:""}),i=S({goBackBtn:{disabled:!1},signUpBtn:{disabled:!0,html:n("signUpBtn.text"),loadingHtml:'<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span class="sr-only"> '+n("signUpBtn.loadingText")+"</span>"},email:{disabled:!0},username:{disabled:!1,iconClass:"",searching:!1}}),g=()=>new Promise(function(o,d){if(r.username=r.username.replace(/\s+/g,"").toLowerCase(),r.username.length>=c.value){i.username.searching=!0;let l={method:"get",params:{username:r.username,langId:a.state.langId},url:"http://127.0.0.1:3002/users/check-username"};Z(l).then(function($){if(i.username.searching=!1,$.status===200&&$.data){let R=$.data.usernameAvailable===1;i.username.iconClass=R?"bi-check-circle-fill":"bi-x-circle-fill",o(R)}else throw $.status===200&&!$.data?{message:$.data.message,type:"warning"}:{close:!0,message:"Ocurrió un error al tratar de registrarte",timer:!0,timerSeconds:3,type:"error"}}).catch($=>{i.signUpBtn.disabled=!1,i.signUpBtn.html=n("signUpBtn.text"),i.username.iconClass="bi-x-circle-fill",$.message&&($.close&&$.close,$.message,$.timer&&$.timer,$.timerSeconds&&$.timerSeconds,$.type&&$.type),d(!1)})}else i.username.iconClass="",o(!0)}),u=k.regex(/^[0-9a-z_.]*$/),b=C(()=>({email:{email:k.withMessage(n("validator.email"),$t),required:k.withMessage(n("validator.required"),Q)},username:{available:k.withMessage(n("inputs.username.notAvailable"),k.withAsync(g)),minLength:k.withMessage(n("validator.minLength",{min:c.value}),bt(c.value)),noSpecialChars:k.withMessage(n("validator.noSpecialChars"),u),required:k.withMessage(n("validator.required"),Q)}})),v=de(b,r),p=()=>{t("goBack")};async function m(){if(await this.v$.$validate()){i.email.disabled=!0,i.goBackBtn.disabled=!0,i.signUpBtn.disabled=!0,i.signUpBtn.html=i.signUpBtn.loadingHtml,i.username.disabled=!0;let d={method:"post",params:{email:r.email,langId:a.state.langId,username:r.username},url:"http://127.0.0.1:3002/users/sign-up"};Z(d).then(function(l){if(i.email.disabled=!1,i.goBackBtn.disabled=!1,i.signUpBtn.disabled=!1,i.signUpBtn.html=n("signUpBtn.text"),i.username.disabled=!1,l.status===200){var $=l.data.message,R=l.data.status;l.data.statusCode===1&&(r.email="",r.username="",v.value.$reset());let h={message:$,show:!0,type:R};console.log(h);let w={alertData:h,statusCode:l.data.statusCode};t("response",w)}else throw{message:n("alert.error"),type:"warning"}}).catch(l=>{i.email.disabled=!1,i.goBackBtn.disabled=!1,i.signUpBtn.disabled=!1,i.signUpBtn.html=n("signUpBtn.text"),i.username.disabled=!1;let R={alertData:{close:l.close?l.close:!1,message:l.message?l.message:n("loginBtn.text"),show:!0,timer:l.timer?l.timer:!1,timerSeconds:l.timerSeconds?l.timerSeconds:0,type:l.type?l.type:"error"}};t("response",R),l.message&&(l.close&&l.close,l.message,l.timer&&l.timer,l.timerSeconds&&l.timerSeconds,l.type&&l.type)})}}return{attrs:i,checkUserExist:g,data:r,goBack:p,signup:m,t:n,v$:v}}}),Jt={class:"d-grid"},Qt={class:"form-label"},Xt=["disabled"],es={class:"form-label"},ts=["disabled"],ss={class:"input-group-text"},as={key:0,class:"spinner-border spinner-border-sm",role:"status"},ns={class:"d-grid"},rs={class:"btn-group",role:"group"},os=["disabled"],is=["disabled","innerHTML"];function ls(e,t,a,s,n,c){return E(),O("form",null,[f("div",Jt,A(e.t("help")),1),f("div",{class:D(e.v$.email.$errors.length>0?"field-error input-group mb-2":"input-group mb-2")},[f("label",Qt,A(e.t("inputs.email.label")),1),t[5]||(t[5]=f("span",{class:"input-group-text"},[f("i",{class:"bi bi-envelope-at"})],-1)),H(f("input",{class:"form-control",disabled:e.attrs.email.disabled,id:"email",type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>e.v$.email.$model=r)},null,8,Xt),[[G,e.v$.email.$model,void 0,{trim:!0}]]),(E(!0),O(W,null,K(e.v$.email.$errors,r=>(E(),O("div",{class:"error-msg",key:r.$uid},[f("p",null,A(r.$message),1)]))),128))],2),f("div",{class:D(e.v$.username.$errors.length>0?"field-error input-group mb-2":"input-group mb-2")},[f("label",es,A(e.t("inputs.username.label")),1),t[7]||(t[7]=f("span",{class:"input-group-text"},[f("i",{class:"bi bi-person"})],-1)),H(f("input",{class:"form-control",disabled:e.attrs.username.disabled,id:"username",onKeyup:t[1]||(t[1]=(...r)=>e.checkUserExist&&e.checkUserExist(...r)),type:"text","onUpdate:modelValue":t[2]||(t[2]=r=>e.v$.username.$model=r)},null,40,ts),[[G,e.v$.username.$model]]),f("span",ss,[e.attrs.username.searching?(E(),O("div",as,t[6]||(t[6]=[f("span",{class:"visually-hidden"},"Loading...",-1)]))):(E(),O("i",{key:1,class:D("bi "+e.attrs.username.iconClass)},null,2))]),(E(!0),O(W,null,K(e.v$.username.$errors,r=>(E(),O("div",{class:"error-msg",key:r.$uid},[f("p",null,A(r.$message),1)]))),128))],2),f("div",ns,[f("div",rs,[f("button",{disabled:e.attrs.goBackBtn.disabled,onClick:t[3]||(t[3]=(...r)=>e.goBack&&e.goBack(...r)),class:"btn",id:"btn-sign-in",type:"button"},A(e.t("backBtn")),9,os),f("button",{disabled:e.attrs.signUpBtn.disabled,onClick:t[4]||(t[4]=(...r)=>e.signup&&e.signup(...r)),class:"btn",id:"btn-sign-in",type:"button",innerHTML:e.attrs.signUpBtn.html},null,8,is)])])])}const cs=X(Yt,[["render",ls],["__scopeId","data-v-8b1da9fe"]]),us=ee({emits:["closeModal"],components:{AccessCodeForm:qt,Alert:Ne,EmailForm:Wt,NewAccountForm:cs},props:{openFrom:{String,default:"default"}},setup(e,{emit:t}){He(()=>{if(a.value=new Ge("#login-carousel"),g.query.message){let h={message:g.query.message,show:!0,type:g.query.type_response};Object.assign(i,h)}});const a=j(null),s=S({accessCode:{email:"",visible:!1},email:{visible:!1},newAccount:{email:"",visible:!1}}),n=te(),c={en:wt,es:Bt},{t:r}=se({messages:c}),i=S({iconCloseButton:!1,message:"",show:!1,timer:0,type:null}),g=We(),u=Ze();Ke((h,w,P)=>{i.show=!1,P()});const b=h=>{h.statusCode===1&&(R(h.userData),e.openFrom==="modal"?t("closeModal"):setTimeout(()=>{u.push({name:"home"})},3e3)),Object.assign(i,h.alertData)},v=()=>({modal:"col-12",default:"col-12 col-md-8 col-lg-6 col-xl-5"})[e.openFrom],p=h=>{h.statusCode===0?d(h):h.statusCode===1&&m(h),Object.assign(i,h.alertData)},m=h=>{h.alertData.type==="success"&&(s.accessCode.email=h.email,s.accessCode.visible=!0,s.email.visible=!1,a.value.to(1))},o=()=>{s.email.visible=!0,a.value.to(0),i.show=!1},d=h=>{s.newAccount.email=h.email,s.newAccount.visible=!0,a.value.to(2)},l=()=>({modal:"container g-0 inModal",default:"container g-0"})[e.openFrom],$=h=>{h.statusCode===1&&setTimeout(()=>{o()},3e3),Object.assign(i,h.alertData)},R=h=>{localStorage.setItem("userAvatar",h.avatar),localStorage.setItem("userEmail",s.accessCode.email),localStorage.setItem("userFirstName",h.name),localStorage.setItem("userId",h.id),localStorage.setItem("username",h.username),n.$patch(w=>{w.state.avatar=h.avatar,w.state.email=s.accessCode.email,w.state.id=h.id,w.state.name=h.name,w.state.username=h.username})};return{accessCodeFormResponse:b,alertProps:i,contentWidth:v,emailFormResponse:p,generatedAccessCode:m,goToEmailFrom:o,forms:s,inModal:l,newAccountFormResponse:$,props:e,route:g,t:r}}}),ds={class:"row g-0 justify-content-center"},ms={class:"title"},gs={class:"text-center"},ps={id:"login-carousel",class:"carousel slide"},fs={class:"carousel-inner"},$s={class:"carousel-item active"},vs={class:"carousel-item"},bs={class:"carousel-item"},hs={class:"d-grid"};function ys(e,t,a,s,n,c){const r=M("EmailForm"),i=M("AccessCodeForm"),g=M("NewAccountForm"),u=M("Alert");return E(),O("div",{class:D(e.inModal())},[f("div",ds,[f("div",{class:D(e.contentWidth())},[f("h3",ms,A(e.t("title")),1),f("p",gs,A(e.t("paragraph")),1),f("div",ps,[f("div",fs,[f("div",$s,[z(r,{onResponse:e.emailFormResponse,"is-visible":e.forms.email.visible},null,8,["onResponse","is-visible"])]),f("div",vs,[z(i,{onGoBack:e.goToEmailFrom,onResponse:e.accessCodeFormResponse,email:e.forms.accessCode.email,"is-visible":e.forms.accessCode.visible},null,8,["onGoBack","onResponse","email","is-visible"])]),f("div",bs,[z(g,{onGoBack:e.goToEmailFrom,onResponse:e.newAccountFormResponse,email:e.forms.newAccount.email,"is-visible":e.forms.newAccount.visible},null,8,["onGoBack","onResponse","email","is-visible"])])])]),f("div",hs,[z(u,{options:e.alertProps},null,8,["options"])])],2)])],2)}const Cs=X(us,[["render",ys],["__scopeId","data-v-f02e2511"]]),As=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"}));export{As as I,Cs as S,Rs as a,k as c,Bs as n,Q as r,de as u};
